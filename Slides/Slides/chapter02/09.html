<!DOCTYPE html>

<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>EduContent CMS - 통합 ERD</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&amp;family=Roboto+Mono:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 1280px;
            height: 720px;
            background-color: #f8fafc;
            font-family: 'Noto Sans KR', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .slide-container {
            width: 1280px;
            height: 720px;
            position: relative;
            background-color: #f8fafc;
            background-image:
                radial-gradient(#cbd5e1 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: hidden;
        }

        /* Header */
        .header {
            position: absolute;
            top: 40px;
            left: 50px;
            right: 50px;
            height: 80px;
            border-bottom: 2px solid #cbd5e1;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding-bottom: 15px;
            z-index: 20;
        }

        .title {
            font-size: 36px;
            font-weight: 900;
            color: #0f172a;
            margin: 0;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 18px;
            color: #64748b;
            font-weight: 500;
            margin: 0;
        }

        /* Diagram Canvas */
        .diagram-area {
            position: absolute;
            top: 140px;
            left: 0;
            width: 100%;
            height: 580px;
            z-index: 10;
        }

        /* SVG Connections */
        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .conn-line {
            fill: none;
            stroke: #94a3b8;
            stroke-width: 2;
        }

        .conn-line.core {
            stroke: #3b82f6;
            stroke-width: 4;
        }

        .conn-line.student {
            stroke: #10b981;
            stroke-width: 2;
            stroke-dasharray: 6, 4;
        }

        .rel-marker {
            font-family: 'Roboto Mono', monospace;
            font-size: 12px;
            font-weight: bold;
            fill: #64748b;
            background: white;
        }

        /* Grouping Box */
        .group-box {
            position: absolute;
            border-radius: 16px;
            z-index: 0;
        }

        .group-box.core {
            top: 10px;
            left: 450px;
            width: 380px;
            height: 550px;
            background-color: rgba(239, 246, 255, 0.6);
            border: 2px dashed #bfdbfe;
        }

        .group-label {
            position: absolute;
            font-weight: 900;
            font-size: 14px;
            color: #3b82f6;
            background: #eff6ff;
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid #bfdbfe;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        /* Table Cards */
        .table-card {
            position: absolute;
            width: 260px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            z-index: 5;
            display: flex;
            flex-direction: column;
        }

        .table-card.core {
            width: 300px;
        }

        .card-header {
            padding: 10px 15px;
            color: white;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-body {
            padding: 8px 15px 12px 15px;
            background: white;
        }

        .field-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 13px;
        }

        .field-row:last-child {
            border-bottom: none;
        }

        .field-name {
            font-family: 'Roboto Mono', monospace;
            font-weight: 600;
            color: #334155;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .field-type {
            font-family: 'Roboto Mono', monospace;
            font-size: 11px;
            color: #94a3b8;
        }

        .pk-icon {
            color: #eab308;
            font-size: 10px;
        }

        .fk-icon {
            color: #94a3b8;
            font-size: 10px;
        }

        /* Themes */
        .theme-core .card-header {
            background: linear-gradient(to right, #2563eb, #3b82f6);
        }

        .theme-core {
            border: 1px solid #bfdbfe;
        }

        .theme-sub-core .card-header {
            background: #6366f1;
        }

        .theme-sub-core {
            border: 1px solid #c7d2fe;
        }

        .theme-student .card-header {
            background: #059669;
        }

        .theme-student {
            border: 1px solid #a7f3d0;
        }

        .theme-meta .card-header {
            background: #475569;
        }

        .theme-meta {
            border: 1px solid #cbd5e1;
        }

        /* Legend */
        .legend {
            position: absolute;
            bottom: 30px;
            right: 50px;
            background: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 20px;
            align-items: center;
            z-index: 50;
            border: 1px solid #e2e8f0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
    </style>

<style>
    /* COMPACT MODE OVERRIDE */
    .slide-container { padding: 20px 30px !important; }
    .header { margin-bottom: 10px !important; padding-bottom: 5px !important; }
    .title { font-size: 1.8rem !important; }
    .subtitle { font-size: 1rem !important; }
    .content-wrapper { padding-top: 5px !important; }
    
    /* Table Compactness */
    .decision-table th, .decision-table td { padding: 6px 10px !important; font-size: 0.8rem !important; }
    .decision-table th { padding: 8px !important; }
    .step-icon { width: 40px !important; height: 40px !important; font-size: 1.2rem !important; }
    
    /* General Text Compactness */
    p, li, .step-desc, .side-text { font-size: 0.85rem !important; line-height: 1.4 !important; }
    h1, h2, h3 { margin-bottom: 4px !important; }
    .section-label { margin-bottom: 6px !important; font-size: 0.8rem !important; }
    
    /* Box Compactness */
    .step-card, .framework-area, .flow-area { padding: 10px !important; min-height: 0 !important; height: auto !important; }
    .badge { padding: 0.4rem 0.8rem !important; font-size: 0.85rem !important; }
    .quote-box { padding: 1.5rem !important; }
    .quote-text { font-size: 1.3rem !important; }
</style>
</head>

<body>
    <div class="slide-container">
        <!-- Header -->
        <div class="header">
            <div>
                <h1 class="title">데이터 모델 개요 — 핵심 테이블 관계도</h1>
                <p class="subtitle">중심 축(Core Axis)과 보조 데이터의 유기적 연결 구조</p>
            </div>
            <div class="text-right">
                <div class="text-blue-700 font-bold text-lg"><i class="fas fa-database mr-2"></i>PostgreSQL ERD</div>
                <div class="text-slate-400 text-sm">JSONB + Relational Mix</div>
            </div>
        </div>
        <!-- Diagram Area -->
        <div class="diagram-area">
            <!-- Group Box for Core -->
            <div class="group-box core">
                <div class="group-label"><i class="fas fa-layer-group mr-2"></i>Content Lifecycle (Single Source of
                    Truth)</div>
            </div>
            <!-- SVG Connections -->
            <svg class="connections-layer">
                <defs>
                    <marker id="arrow-core" markerheight="12" markerwidth="12" orient="auto" refx="10" refy="6">
                        <path d="M2,2 L10,6 L2,10 L2,2" fill="#3b82f6"></path>
                    </marker>
                    <marker id="arrow-meta" markerheight="10" markerwidth="10" orient="auto" refx="9" refy="5">
                        <path d="M2,2 L9,5 L2,8 L2,2" fill="#94a3b8"></path>
                    </marker>
                    <marker id="arrow-student" markerheight="10" markerwidth="10" orient="auto" refx="9" refy="5">
                        <path d="M2,2 L9,5 L2,8 L2,2" fill="#10b981"></path>
                    </marker>
                </defs>
                <!-- 1. Users -> Documents -->
                <path class="conn-line" d="M 330 80 L 490 80" marker-end="url(#arrow-meta)"></path>
                <text class="rel-marker" fill="#64748b" x="340" y="75">1</text>
                <text class="rel-marker" fill="#64748b" x="470" y="75">N</text>
                <!-- 2. Curriculum -> Documents -->
                <path class="conn-line" d="M 330 240 L 400 240 L 400 120 L 490 120" fill="none"
                    marker-end="url(#arrow-meta)"></path>
                <!-- 3. Documents -> Versions (CORE) -->
                <path class="conn-line core" d="M 640 156 L 640 190" marker-end="url(#arrow-core)"></path>
                <!-- 4. Versions -> Annotations (CORE) -->
                <path class="conn-line core" d="M 640 306 L 640 340" marker-end="url(#arrow-core)"></path>
                <!-- 5. Annotations -> Questions (CORE) -->
                <path class="conn-line core" d="M 640 456 L 640 490" marker-end="url(#arrow-core)"></path>
                <!-- 6. Users -> Profiles -->
                <path class="conn-line" d="M 200 156 L 200 480 L 950 480 L 950 146" fill="none" stroke="#cbd5e1"
                    stroke-dasharray="4"></path>
                <!-- 7. Profiles -> Logs -->
                <path class="conn-line student" d="M 1090 146 L 1090 320" marker-end="url(#arrow-student)"></path>
                <!-- 8. Questions -> Logs -->
                <path class="conn-line student" d="M 790 530 L 950 530 L 950 436" marker-end="url(#arrow-student)">
                </path>
            </svg>
            <!-- --- META COLUMN (Left) --- -->
            <!-- Table: users -->
            <div class="table-card theme-meta" style="top: 40px; left: 70px;">
                <div class="card-header"><i class="fas fa-users"></i> users</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">email</span>
                        <span class="field-type">varchar</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">role</span>
                        <span class="field-type">enum</span>
                    </div>
                </div>
            </div>
            <!-- Table: curriculum -->
            <div class="table-card theme-meta" style="top: 200px; left: 70px;">
                <div class="card-header"><i class="fas fa-book"></i> curriculum</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">int</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">subject</span>
                        <span class="field-type">varchar</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">standard_code</span>
                        <span class="field-type">varchar</span>
                    </div>
                </div>
            </div>
            <!-- --- CORE COLUMN (Center) --- -->
            <!-- Table: documents -->
            <div class="table-card theme-core core" style="top: 40px; left: 490px;">
                <div class="card-header"><i class="fas fa-file-alt"></i> documents</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> author_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">title</span>
                        <span class="field-type">varchar</span>
                    </div>
                </div>
            </div>
            <!-- Table: document_versions -->
            <div class="table-card theme-sub-core core" style="top: 190px; left: 490px;">
                <div class="card-header"><i class="fas fa-code-branch"></i> document_versions</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> doc_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">content</span>
                        <span class="field-type">jsonb</span>
                    </div>
                </div>
            </div>
            <!-- Table: document_annotations -->
            <div class="table-card theme-sub-core core" style="top: 340px; left: 490px;">
                <div class="card-header"><i class="fas fa-tags"></i> document_annotations</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> version_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">type</span>
                        <span class="field-type">enum</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">data</span>
                        <span class="field-type">jsonb</span>
                    </div>
                </div>
            </div>
            <!-- Table: quiz_questions -->
            <div class="table-card theme-core core"
                style="top: 490px; left: 490px; border-color: #3b82f6; box-shadow: 0 0 0 2px #dbeafe;">
                <div class="card-header" style="background: #1e40af;"><i class="fas fa-question-circle"></i>
                    quiz_questions</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> source_annot_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">question_text</span>
                        <span class="field-type">text</span>
                    </div>
                </div>
            </div>
            <!-- --- STUDENT COLUMN (Right) --- -->
            <!-- Table: student_profiles -->
            <div class="table-card theme-student" style="top: 40px; left: 950px;">
                <div class="card-header"><i class="fas fa-user-graduate"></i> student_profiles</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> user_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">current_elo</span>
                        <span class="field-type">int</span>
                    </div>
                </div>
            </div>
            <!-- Table: learning_logs -->
            <div class="table-card theme-student" style="top: 320px; left: 950px;">
                <div class="card-header"><i class="fas fa-history"></i> learning_logs</div>
                <div class="card-body">
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key pk-icon"></i> id</span>
                        <span class="field-type">bigint</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> student_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name"><i class="fas fa-key fk-icon"></i> question_id</span>
                        <span class="field-type">uuid</span>
                    </div>
                    <div class="field-row">
                        <span class="field-name">is_correct</span>
                        <span class="field-type">bool</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="dot" style="background:#3b82f6"></div>Content Core
            </div>
            <div class="legend-item">
                <div class="dot" style="background:#10b981"></div>Student Data
            </div>
            <div class="legend-item">
                <div class="dot" style="background:#64748b"></div>System Meta
            </div>
            <div class="h-4 w-px bg-slate-200 mx-2"></div>
            <div class="legend-item"><i class="fas fa-key text-yellow-500 mr-1"></i>PK</div>
            <div class="legend-item"><i class="fas fa-key text-slate-400 mr-1"></i>FK</div>
        </div>
    </div>
</body>

</html>